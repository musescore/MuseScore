cmake_minimum_required(VERSION 3.11)

option(ENABLE_64_BIT_WORDS "Set FLAC__BYTES_PER_WORD to 8 (4 is the default)" OFF)
option(WITH_XMMS "Build XMMS plugin" OFF)
option(BUILD_UTILS "Build utils" OFF)

add_subdirectory("libFLAC")
if(BUILD_CXXLIBS)
    add_subdirectory("libFLAC++")
endif()
add_subdirectory("share/replaygain_analysis")
add_subdirectory("share/replaygain_synthesis")
add_subdirectory("share/getopt")
add_subdirectory("share/utf8")
add_subdirectory("share/grabbag")

if(BUILD_PROGRAMS)
    add_subdirectory("flac")
    add_subdirectory("metaflac")
endif()
if(BUILD_UTILS)
    add_subdirectory(utils/flacdiff)
    if(WIN32)
        add_subdirectory(utils/flactimer)
    endif()
endif()

if(WITH_XMMS)
    add_subdirectory("plugin_common")
    add_subdirectory("plugin_xmms")
endif()
if(BUILD_TESTING)
    add_subdirectory("test_libs_common")
    add_subdirectory("test_libFLAC")
    if(BUILD_CXXLIBS)
        add_subdirectory("test_libFLAC++")
    endif()
    add_subdirectory("test_grabbag")
    add_subdirectory("test_seeking")
    add_subdirectory("test_streams")
endif()
